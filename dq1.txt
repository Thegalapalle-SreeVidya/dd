# Parameters cell for Papermill
benchmark_month_number = 6  # Default value, will be overwritten by Papermill
validation_month = 12       # Default value, will be overwritten by Papermill


# Use parameters directly instead of input()
list_benchmark_month = []
for j in range(benchmark_month_number):
    list_benchmark_month.append(validation_month - (j + 1))

benchmark_months = list_benchmark_month
merged_df_benchmark_months = merged_df[merged_df["Month"].isin(benchmark_months)]
merged_df_validation_month = merged_df[merged_df["Month"] == validation_month]
nodes = 10  # or another parameter if dynamic input is needed later



import subprocess

def run_notebook(notebook_path, output_path, params):
    command = f"papermill {notebook_path} {output_path} -p benchmark_month_number {params['benchmark_month_number']} -p validation_month {params['validation_month']}"
    subprocess.run(command, shell=True, check=True)

# Example usage in Streamlit:
if st.button("Run Analysis"):
    params = {
        "benchmark_month_number": benchmark_month_number,
        "validation_month": validation_month
    }
    run_notebook("x.ipynb", "x_output.ipynb", params)
    st.success("Notebook has been executed.")
